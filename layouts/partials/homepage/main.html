<main>
    <div class="image image1"></div>

    <br>

    <div id="weddingTimer"></div>

<script>
// === SHADOW DOM TIMER COMPONENT (UNBREAKABLE) ===
(function() {

  const container = document.getElementById("weddingTimer");
  const shadow = container.attachShadow({ mode: "open" });

  shadow.innerHTML = `
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

  <style>
    :host {
      font-family: 'Share Tech Mono', monospace;
      display: block;
      text-align: center;
      padding: 30px 0;
    }

    h2 {
      font-size: 32px;
      font-weight: 400;
      margin-bottom: 30px;
    }

    .row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
    }

    .unit {
      text-align: center;
    }

    .label {
      margin-top: 10px;
      font-size: 18px;
      color: #111;
    }

    .sep {
      font-size: 40px;
      color: #444;
      margin-bottom: 60px;
    }

    .digits {
      display: flex;
      gap: 6px;
    }

    .card {
      position: relative;
      width: 80px;
      height: 110px;
      perspective: 300px;
    }

    .top, .bottom {
      background: #2f2f2f;
      color: #c7c7c7;
      font-size: 85px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 50%;
      overflow: hidden;
      border-top: 1px solid #000;
      border-bottom: 1px solid #000;
      line-height: 1;
    }

    .top {
      border-bottom: 1px solid #111;
    }

    .bottom {
      border-top: 1px solid #111;
    }

    .flip {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: #2f2f2f;
      color: #c7c7c7;
      font-size: 85px;
      line-height: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      transform-origin: bottom;
      animation: flipAnim 0.7s forwards ease-in-out;
    }

    @keyframes flipAnim {
      from { transform: rotateX(0); }
      to { transform: rotateX(-90deg); }
    }

    @media (max-width: 700px) {
      .card { width: 55px; height: 75px; }
      .top, .bottom, .flip { font-size: 55px; }
      .sep { font-size: 28px; }
      .label { font-size: 16px; }
    }
  </style>

  <h2>Days Since We Got Married</h2>

  <div class="row">
    <div class="unit">
      <div class="digits" id="d"></div>
      <div class="label">Days</div>
    </div>

    <div class="sep">•</div>

    <div class="unit">
      <div class="digits" id="h"></div>
      <div class="label">Hours</div>
    </div>

    <div class="sep">•</div>

    <div class="unit">
      <div class="digits" id="m"></div>
      <div class="label">Minutes</div>
    </div>

    <div class="sep">•</div>

    <div class="unit">
      <div class="digits" id="s"></div>
      <div class="label">Seconds</div>
    </div>
  </div>
  `;

  const start = new Date("2025-04-26T18:00:00");
  const lastVal = { d: "", h: "", m: "", s: "" };

  function createCard(val) {
    return `
      <div class="card" data-val="${val}">
        <div class="top">${val}</div>
        <div class="bottom">${val}</div>
      </div>`;
  }

  function updateDigits(root, oldStr, newStr) {
    newStr = newStr.toString();

    if (root.children.length !== newStr.length) {
      root.innerHTML = "";
      [...newStr].forEach(v => root.innerHTML += createCard(v));
    }

    [...newStr].forEach((v, i) => {
      const card = root.children[i];
      const old = oldStr[i] ?? v;

      if (old !== v) {
        card.innerHTML = `
          <div class="top">${old}</div>
          <div class="bottom">${v}</div>
        `;
        const flip = document.createElement("div");
        flip.className = "flip";
        flip.textContent = old;
        card.appendChild(flip);
        setTimeout(() => flip.remove(), 800);
      }
    });
  }

  function tick() {
    const now = new Date();
    let diff = now - start;
    if (diff < 0) diff = 0;

    const sec = Math.floor(diff / 1000);
    const d = Math.floor(sec / 86400).toString();
    const h = String(Math.floor((sec % 86400) / 3600)).padStart(2, "0");
    const m = String(Math.floor((sec % 3600) / 60)).padStart(2, "0");
    const s = String(sec % 60).padStart(2, "0");

    updateDigits(shadow.getElementById("d"), lastVal.d, d);
    updateDigits(shadow.getElementById("h"), lastVal.h, h);
    updateDigits(shadow.getElementById("m"), lastVal.m, m);
    updateDigits(shadow.getElementById("s"), lastVal.s, s);

    lastVal.d = d;
    lastVal.h = h;
    lastVal.m = m;
    lastVal.s = s;
  }

  tick();
  setInterval(tick, 1000);

})();
</script>

<br>


    <section id="when" class="section light">
        <div class="section__svg">
            {{ partial "svgs/leaf.svg" . }}
        </div>
        <h1 class="section__heading">The Wedding</h1>
        <section class="section__split">
            <div>
                <p class="section__subheading">When</p>
                <p class="section__text--bold">
                    Sat April 26th 2025, 6:00PM
                </p>
            </div>
            <div>
                <p class="section__subheading">Where</p>
                <p class="section__text--bold">
                    Our Lady of Prompt Succor
                </p>
                <p>
                    146 Fourth St., Westwego, LA, 70094
                </p>
            </div>
        </section>
        <!-- My CSS in this project is bad, man -->
        <!-- <section style="display:flex;flex-direction:column;align-items:center;">
            <h2 style="margin-top:2rem;" class="section__heading">Speeches</h2>

            <h3 style="margin-top:2rem;" class="section__heading">Father of Bride</h3>
            <iframe width="100%" height="315" src="https://www.youtube.com/embed/XfCBomxy7K8"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>

            <h3 style="margin-top:2rem;" class="section__heading">Best Man</h3>
            <iframe width="100%" height="315" src="https://www.youtube.com/embed/JzArXpZgaOs"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>

            <h3 style="margin-top:2rem;" class="section__heading">Groom</h3>
            <iframe width="100%" height="315" src="https://www.youtube.com/embed/NPhbs9SEmVc"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>

        </section> -->
    </section>

    <div class="image image2"></div>


    <section id="order-of-events" class="section light">
        <div class="section__svg">
            {{ partial "svgs/leaves.svg" . }}
        </div>

        {{ $t := .Site.GetPage "/section/order-of-events" }}
        <h1 class="section__heading">{{$t.Params.title}}</h1>
        <section class="section__md-content">
            {{ $t.Content }}
        </section>
    </section>

    <div class="image image3"></div>

    <section id="travel-accommodation" class="section light">
        <div class="section__svg">
            {{ partial "svgs/leaf.svg" . }}
        </div>

        {{ $t := .Site.GetPage "/section/travel-accommodation" }}
        <h1 class="section__heading">{{$t.Params.title}}</h1>
        <section class="section__md-content">
            {{ $t.Content }}
        </section>
    </section>

    <div class="image image1"></div>

    <section id="dress" class="section light">
        <div class="section__svg">
            {{ partial "svgs/leaf.svg" . }}
        </div>

        {{ $t := .Site.GetPage "/section/dress" }}
        <h1 class="section__heading">{{$t.Params.title}}</h1>
        <section class="section__md-content">
            {{ $t.Content }}
        </section>
    </section>
    <section id="facilities-accessibility" class="section light">
        {{ $t := .Site.GetPage "/section/facilities-accessibility" }}
        <h1 class="section__heading">{{$t.Params.title}}</h1>
        <section class="section__md-content">
            {{ $t.Content }}
        </section>
    </section>
    <section id="gifts" class="section light">
        {{ $t := .Site.GetPage "/section/gifts" }}
        <h1 class="section__heading">{{$t.Params.title}}</h1>
        <section class="section__md-content">
            {{ $t.Content }}
        </section>
    </section>

    <div class="image image2"></div>

    <section id="more" class="section light" style="text-align:center;">
        <div class="section__svg">
            {{ partial "svgs/leaf.svg" . }}
        </div>
        <p style="margin-bottom:1em;">Thank you for visiting our website!</p>
        <p style="margin-bottom:1em;">We cannot wait to share this special day with you, and have all our loved ones
            under one roof for the first time in FOREVER!</p>
        <p style="margin-bottom:1em;">In the meantime, if you have any questions you can contact us both at <a
                href="mailto:info@victorianobennett.wedding">info@victorianobennett.wedding</a></p>

        <!-- <p style="margin-top:2em;margin-bottom:1em;">*</p>
        <p style="margin-bottom:1em;">Also, did you know the invitation is made of recycled paper and wild flower seeds,
            and can be planted?</p>
        <p style="margin-bottom:1em;">To plant your invitation, <a href="/plant">see instructions here</a>
        </p>
        </p>
    -->
    </section>

    <div class="scroll-top">
        <a class="scroll-top__button" href="#top">
            {{ partial "svgs/scroll-up.svg" . }}
        </a>
    </div>
</main>